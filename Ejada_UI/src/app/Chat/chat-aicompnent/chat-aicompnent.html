<div class="chat-widget" *ngIf="showChat">
  <div class="chat-header">
    AI Assistant
    <button class="btn-close" (click)="showChat = false">Ã—</button>
  </div>

  <div class="chat-body">
    <div *ngFor="let message of chatHistory">
      <div
        class="chat-bubble"
        [class.user]="message.sender === 'user'"
        [class.ai]="message.sender === 'ai'"
      >
        {{ message.text }}
      </div>
    </div>

    <div *ngIf="loading" class="spinner-border mt-2" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <div class="chat-input">
    <textarea
      [(ngModel)]="Message"
      (keydown)="onKeydown($event)"
      placeholder="Type a message and press Enter..."
      rows="2"
    ></textarea>
    <button (click)="SendChat()" class="btn btn-primary">Send</button>
  </div>
</div>

<!-- Floating Button -->
<button class="floating-button" *ngIf="!showChat" (click)="showChat = true">ðŸ’¬</button>
